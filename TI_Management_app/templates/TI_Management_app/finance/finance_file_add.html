{% extends 'TI_Management_app/base.html' %}
{% load ti_management_tags %}

{% block breadcrumbs %}
<a href="{% url 'TI_Management_app:finance_list' %}"> / Finanse</a>
<a href="#"> / Dodawanie dokumentu księgowego</a>
{% endblock %}

{% block content %}

<div class="hero-unit">
    <form method="post" class="post-form" enctype="multipart/form-data">
        {% csrf_token %}
        {% if form_kind_of_document.errors %}
            {{form_kind_of_document.errors}}
        {% endif %}
        <h2>Dodawanie dokumentu księgowego</h2>
        <br />

        <p><b>Rodzaj dokumentu:</b></p>
        <input
                class="form-control me-2"
                style="min-width: 50%!important; min-height: 15px"
                type="text"
                list="kind_of_finance_document"
                placeholder="Rodaj dokumentu"
                aria-label="Rodzaj dokumentu"
                name="title"
                required />
        <datalist id="kind_of_finance_document">
            {% for document_kind in kind_of_finance_document %}
                <option value="{{ document_kind.title }}"></option>
            {% endfor %}
        </datalist>
        <br />
        <hr>
        <p><b>Dodaj document:</b></p>
            <label class="file">
                {{form_file_finance.file}}
            </label>
        <br />
        <hr>

        <p><b>Kwota:</b></p>
        <input
                class="form-control me-2"
                style="max-width: 25%!important; min-height: 15px"
                type="number"
                placeholder="0"
                aria-label="Kwota"
                name="figure"
                min="0"
                step="0.01"
                required /> zł
        <br />
        <hr>
        <p><b>Pozycji na wyciągu:</b></p>
        <input
                class="form-control me-2"
                style="max-width: 25%!important; min-height: 15px"
                type="number"
                placeholder="0"
                aria-label="Pozycji na wyciągu"
                name="quantity"
                min="0"
                step="1"
                required />
        <br />
        <hr>
        <p><b>Data:</b></p>
        <input
                class="form-control me-2"
                style="max-width: 50%!important; min-height: 15px"
                type="date"
                name="payment_date"
                required />
        <br />
        <hr>
        <p><b>Dokument bez uchwały:</b></p>
        <input
                class="form-control me-2"
                style="min-width: 1%!important; min-height: 15px"
                type="checkbox"
                aria-label="Dokument bez uchwały"
                name="confirmation_of_student_id"
                id="documentRequirement" />
        <br />
        <hr>
        <p><b>Przypnij uchwałę:</b></p>
<!--        <label for="resolution">Uchwały</label>-->
        <select name="resolution" id="resolution">
            <optgroup label="Kategoria uchwały">
                <option value="none">Brak</option>
            {% for doc in doc_database %}
                <option value="{{ doc.title }}">{{ doc.title }}</option>
            {% endfor %}
            </optgroup>
        </select>
        <br />
        <hr>
        <p><b>Nazwa wydatku:</b></p>
        <input
                class="form-control me-2"
                style="min-width: 50%!important; min-height: 15px"
                type="text"
                list="doc_database"
                placeholder="Nazwa wydatku"
                aria-label="Nazwa wydatku"
                name="expense_name"
                required />
        <datalist id="doc_database">
        {% for expense in expense_names %}
            <option value="{{ expanse.expanse_name }}"></option>
        {% endfor %}
        </datalist>
        <br />
        <hr>
        <p><b>Pomoc psychologa?</b></p>
        <input
                class="form-control me-2"
                style="min-width: 1%!important; min-height: 15px"
                type="checkbox"
                aria-label="Pomoc psychologa"
                name="psychologist"
                id="PsychologistHelp" />
        <br />
        <div id="memberDiv" style="display: none;">
            <br />
            <input
                class="form-control me-2"
                style="min-width: 50%!important; min-height: 15px"
                type="text"
                list="members"
                placeholder="Nr Członka"
                aria-label="Nr Członka"
                name="member" />
            <datalist id="members">
                {% for member in members %}
                <option value="{{ member.member_nr }}">{{ member.member_nr }}</option>
                {% endfor %}
            </datalist>


<!--            <p><small>Nr Członka:</small></p>-->
<!--            <select name="member" id="member">-->
<!--                <optgroup label="Nr Członka">-->
<!--                    <option value="none">Brak</option>-->
<!--                    {% for member in members %}-->
<!--                        <option value="{{ member.member_nr }}">{{ member.member_nr }}</option>-->
<!--                    {% endfor %}-->
<!--                </optgroup>-->
<!--            </select>-->
        </div>
        <hr>
        <br />


        <button type="submit" class="btn btn-primary btn-large pull-right">
            Zapisz
        </button>
        <br />
    </form>
</div>
<script>
    document.getElementById('documentRequirement').addEventListener('change', function() {
        var resolutionSelect = document.getElementById('resolution');
        resolutionSelect.disabled = this.checked;
    });
    document.getElementById('resolution').addEventListener('change', function() {
        var documentRequirement = document.getElementById('documentRequirement');
        documentRequirement.disabled = this.value !== 'none';
    });
    document.getElementById('PsychologistHelp').addEventListener('change', function() {
        var memberDiv = document.getElementById('memberDiv');
        if (this.checked) {
            memberDiv.style.display = 'block';
        } else {
            memberDiv.style.display = 'none';
        }
    });
</script>
{% endblock %}

{% block menu %}
    {% include 'TI_Management_app/menu.html' with active_tab='finance_file_add' %}
{% endblock %}